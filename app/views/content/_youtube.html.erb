
<ul>

<% @video.each do |vi|%>

<li style="display: inline; position: relative; float: left; width: 200px; height: 142px; list-style-type: none; margin-right: 2px;">

        <div class="video" id="videoSlider">
              <% @id = vi.published_at %>
              <% @complex_id =  @id.strftime("%m""%d""%Y")%>
             
               <div  class="tumbail_youtube<%= @complex_id %>" >
                   <%= link_to truncate("#{vi.title}", :omission => "...", :length => 15), "#{vi.player_url}", :target => '_blank' %></br>
                   <%= image_tag("#{vi.thumbnails[1].url}")%>
                   <%#= debug vi.thumbnails %>
               </div>
           
                <div id="l_tumbail_youtube<%= @complex_id %>" style="display:none;">
                	 <%= link_to truncate("#{vi.title}", :omission => "...", :length => 15), "#{vi.player_url}", :target => '_blank' %></br>
                <%= vi.embed_html_with_width(320).html_safe%>
                 </div>
           
             <SCRIPT LANGUAGE="JavaScript">
                  $('.tumbail_youtube<%= @complex_id %>').click(function() {
                         $('.tumbail_youtube<%= @complex_id %>').html('');
                         $('#l_tumbail_youtube<%= @complex_id %>').show();
                     });
             </SCRIPT>
       
            
                   <div class="button_add" id="add_nested_delivery_content<%= @complex_id %>">
                      Agregar
                   </div>
       </div>
                   
</li>

         
         <SCRIPT LANGUAGE="JavaScript">
                  
               $('#add_nested_delivery_content<%= @complex_id%>').click(function() {
                   
                    $('#content_killer').append('<input id="delivery_contents_attributes_<%=@complex_id%>_content" name="delivery[contents_attributes][<%=@complex_id%>][content]" size="30" type="hidden" value="<%= vi.player_url%>">');
                
                
                    $("#choser").append("<a href='<%=vi.player_url%>'><%=vi.player_url%></a></br>");
                    
                });
          
          </SCRIPT>       
<%end%>

</ul>

<script>
$(function(){
  
    var $bl    = $("#youtube_content_delivery"),
        $th    = $("#content_free"),
        blW    = $bl.outerWidth(),
        blSW   = $bl[0].scrollWidth,
        wDiff  = (blSW/blW)-1,  // widths difference ratio
        mPadd  = 500,  // Mousemove Padding
        damp   = 20,  // Mousemove response softness
        mX     = 0,   // Real mouse position
        mX2    = 0,   // Modified mouse position
        posX   = 330,
        mmAA   = blW+(mPadd+10), // The mousemove available area
        mmAAr  = (blW/mmAA);    // get available mousemove fidderence ratio

	$bl.mousemove(function(e) {
        mX = e.pageX - this.offsetLeft;
        mX2 = Math.min( Math.max(0, mX-mPadd), mmAA ) * mmAAr;
	});

	setInterval(function(){
		posX += (mX2 - posX) / damp; // zeno's paradox equation "catching delay"	
		$th.css({marginLeft: -posX*wDiff });
	}, 10);

});
</script>
