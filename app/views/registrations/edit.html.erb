<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put, :class => "default-form user-edit-form"}) do |f| %>

<script>
function readURL(input,id) {
	if (input.files && input.files[0]) {
		var reader = new FileReader();

		reader.onload = function (e) {
			$('#'+id)
			.attr('src', e.target.result)
			.width(50)
			.height(45);
		};

		reader.readAsDataURL(input.files[0]);
	}
}
</script>
<div id="edituserdmenu">
    <h3>Editar Usuario</h3>
    <div class="box-avatar">
    <div class="clip"></div>
      <div class="box-image">
      	<table border="0" cellpadding="0" cellspacing="0">
	      	<tr>
	      	<td><img id="img_prev_user" src="<%= current_user.avatar.profile || current_user.image_avatarx %>" class = "avatar-mini avatar" /></td>
	      	<td><%= f.file_field :avatar, :class=> 'stylize', :onchange => "readURL(this,'img_prev_user');" %></td>
	      	</tr>
	      	<tr>
	      	<td></td>
	      	<td>
	        <span class="fixelement"><%= f.label :Imagen_de_perfil, :class=> 'avatar-label' %></span>
	        <div style="clear: both;">
	              <%#= f.fields_for :avatar do |asset| %>
	                  <%#= render :partial => "shared/assets_form", :locals => { :f => asset, :isSingle => true } %>
	              <%#end%>
	        </div>
	        </td>
	        </tr>
	     </table>
      </div><!-- ends box-image -->
      <div class="box-image">
      	<table border="0" cellpadding="0" cellspacing="0">
      		<tr>
      		<td><img id="img_prev_cover" src="<%= current_user.coverphoto || current_user.image_avatarx %>" class = "avatar-mini cover"/></td>
      		<td><%= f.file_field :coverphoto, :class=> 'stylize',:onchange => "readURL(this,'img_prev_cover');" %></td>
      		</tr>
      		<tr>
      		<td></td>
      		<td>
	      	<span class="fixelement"><%= f.label :imagen_de_portada, :class=> 'coverphoto-label' %></span>
	        <div style="clear: both;">
	        	<%#= f.fields_for :coverphoto do |asset| %>
	              <%#= render :partial => "shared/assets_form", :locals => { :f => asset, :isSingle => true } %>
	              <%#end%>
	        </div>
	        </td>
	        </tr>
	        </table>
      </div>
      <div class="box-cancel">
        <p>¿Quieres darte de baja? <%= link_to "Cancela tu cuenta", registration_path(resource_name), :data => { :confirm => "Are you sure?" }, :method => :delete %>.</p>
      </div>
    </div><!-- ends box-image -->
    
  <%= devise_error_messages! %>
  <div class="box-fields edituser">
  	  <div class="leftlabel">
	      <%= f.label :Nombre %>
	      <%= f.text_field :first_name %>
      </div>
  	  <div class="rightlabel">
	      <%= f.label :Apellido %>
	      <%= f.text_field :last_name %>
  	  </div>
  	  <div class="leftlabel">
	      <%= f.label :Correo_electronico %>
	      <%= f.email_field :email %>
      </div>
  	  <div class="rightlabel">
	      <%= f.label :bio %> <br>
	      <%= f.text_area :bios, :rows => 6, :style=>"width:230px" %>
      </div>
  	  <div class="leftlabel">
	      <%= f.label :twitter_link %>
	      <%= f.text_field :twitter_link %>
  	  </div>
  	  
  

  	  <div class="leftlabel" style="margin-left:-250px; margin-top:65px;">    
	      <%= f.label :Direccion %><div id="taget"></div></br></br></br>
	      <p style="font-size:10px;">Recuerda no colocar espacios </br> ni simbolos como (¨,:*`^;/\) </br>
	         ya que no se aceptará tu url</p>
	      <div style="float:left; clear: both;">
	      <div class="personal-url-label" style="padding-top:10px;">http://cursa.me/users/</div><%= f.text_field :personal_url, :class => 'personal-url' %></div>
	      
	      <script>
              $("#user_personal_url").keyup(function () {
                  var value = $(this).val();
                  var url = '/personlization_url_corroborate/'+value+""

                    $.get(""+url+"");
                    return
              });
            </script>
      </div>
      
  	  <div class="rightlabel">
	      <%= f.label :confirma_tus_cambios %>
	      <%= f.password_field :current_password, :placeholder => 'Contraseña' %>
      </div>
      <div class="passsctn" style="clear: both;background: #eee;width: 526px;height: 80px; padding: 0px 10px; margin-left: -10px; top: 13px; margin-bottom:20px; position: relative; -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px;">
	  	  <div class="leftlabel">
		      <div><%= f.label :nuevo_password %>
		      	<%= f.password_field :password, :autocomplete => "off" %></div>
		      	<!-- (Deja el campo en blanco si no quieres cambiar tu contraseña) -->
		  </div>
	  	  <div class="rightlabel">
		        <div><%= f.label :confirma_el_password %><br />
		        <%= f.password_field :password_confirmation %></div>
		  </div>
	  </div><!-- ends   -->

  </div><!-- ends box-fields -->

  <div class="submit-area"></div>
      <!-- <div><%= f.label :confirma_tus_cambios_colocando_tu_contraseña %>
        <%= f.password_field :current_password %>
      </div> -->
  <div class="submit-btns" style="margin-top:0px!important;float:right!important;"><%= f.submit "Actualizar" %><%= link_to "Regresar", :back, :class => "a-btn" %></div>

  </div><!-- ends edituserdmenu -->
<% end %>