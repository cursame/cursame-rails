function readURL(input, id, width) {
  if (input.files && input.files[0]) {
    var reader = new FileReader();
    reader.onload = function (e) {
      $('#' + id)
      .attr('src', e.target.result)
    };
    reader.readAsDataURL(input.files[0]);
  }
}
  
$( "#students-search-input" ).autocomplete({
  source: '<%= Rails.application.routes.url_helpers.network_students_path %>',
   messages: {
    noResults: 'No se encontro nigun estudiante.',
    results: function(count) {
      return "";
    }
  },
  select: function (event, user) {
    var usersList = $('#autocomplete-users-box'),
        userContainer = usersList.find('div.users-list'),
        noContent = usersList.find('div.inner-no-content'),
        users = usersList.find('div.table-box-unit'),
        already = false;

    if ( noContent.length ) {
      noContent.remove();
    };

    if ( users.length ) {
      $.each(users, function(index, member) {
        if ( $(member).data('user-id') == user.item.id ) {
          already = true;
          return false;
        };
      });
    };

    if ( already ) {
      Notice('error', 'El estudiante que seleccionaste ya es miembro.')
    } else {
      userContainer.append( HandlebarsTemplates['users/autocomplete-user-unit']( user ) );
    };
  }
}).data( "autocomplete" )._renderItem = function( ul, item ) {
  var avatarURL;

  if ( item.avatar.head.url ) {
    avatarURL = item.avatar.head.url;
  } else {
    avatarURL = "/assets/imagexxxx.png"
  };
  
  return $( "<li>" ).append( "<a> <img class='avatar' src='" + avatarURL + "' alt=''/>" + item.last_name + " "+ item.first_name + "</a>" ).appendTo( ul );
};